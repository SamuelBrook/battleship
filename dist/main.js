(()=>{"use strict";const t=t=>{const e=document.querySelector("#container"),o=document.querySelector("#enemy-board"),s=document.querySelector("#player-board");o.remove(),s.remove();const a=document.createElement("div");if(a.id="play-again-container",e.appendChild(a),!0===t){const t=document.createElement("div");t.id="win-banner",t.textContent="YOU WIN! ALL ENEMY SHIPS SUNK!",a.appendChild(t)}else{const t=document.createElement("div");t.id="lose-banner",t.textContent="YOU LOSE! ALL SHIPS SUNK!",a.appendChild(t)}const i=document.createElement("div");i.id="play-again",i.textContent="Play Again?",a.appendChild(i)},e=(t,e,o)=>{!0===o?document.querySelector("#player-board").childNodes.forEach((o=>{o.id===t&&!0===e?o.classList.add("hit"):o.id===t&&o.classList.add("miss")})):document.querySelector("#enemy-board").childNodes.forEach((o=>{o.id===t&&!0===e?o.classList.add("hit"):o.id===t&&o.classList.add("miss")}))},o=class{sunk=!1;hits=0;constructor(t){this.shipLength=t}hasSunk(){this.hits===this.shipLength&&(this.sunk=!0)}},s=class{shipArray=[];shipCoordinatesCreated=[];placedShipLocations=[];hits=0;constructor(t){this.shipCoordinates=t}callShips(){const t=[new o(4),new o(3),new o(3),new o(2),new o(2),new o(2),new o(1),new o(1),new o(1),new o(1)];this.shipArray=t}createRandomShipCoordinates(){const t=[],e=this.shipArray;function o(s){let a=[],i=[];const n=[],r=Math.floor(2*Math.random()),h=e[s].shipLength;if(0===r){a=Math.floor(Math.random()*(10-(h-1))),i=Math.floor(10*Math.random()+1);for(let t=0;t<h;t+=1)n.push([a+t,i])}else{i=Math.floor(Math.random()*(10-(h-1))),a=Math.floor(10*Math.random()+1);for(let t=0;t<h;t+=1)n.push([a,i+t])}const l=function(e){for(let o=0;o<e.length;o+=1)for(let s=0;s<t.length;s+=1)for(let a=0;a<t[s].length;a+=1)if(e[o][0]===t[s][a][0]&&e[o][1]===t[s][a][1])return!1;return!0}(n);l?t.push(n):o(s)}for(let t=0;t<this.shipArray.length;t+=1)o(t);this.shipCoordinatesCreated=t}placeShips(t){if(t)for(let e=0;e<this.shipArray.length;e+=1){const{shipLength:o}=this.shipArray[e],s=[t[e][0]];for(let a=1;a<=o;a+=1)s.push(t[e][0]+a);const a=[s,[t[e][1]]];this.placedShipLocations.push(a)}else this.placedShipLocations=this.shipCoordinatesCreated}attackReceived(t){let e=!1;const o=t[0],s=t[1];for(let t=0;t<this.placedShipLocations.length;t+=1)for(let a=0;a<this.placedShipLocations[t].length;a+=1){const i=this.placedShipLocations[t][a][0],n=this.placedShipLocations[t][a][1];i===o&&n===s&&(this.shipArray[t].hits+=1,this.shipArray[t].hasSunk(),e=!0)}return e}allShipsSunk(){let t=0;for(let e=0;e<this.shipArray.length;e+=1)!0===this.shipArray[e].sunk&&(t+=1);return t===this.shipArray.length}},a=class{shotArray=[0,0];shotArrayPlayer=[0,0];playerShot(t,e){for(let o=0;o<e.length;o+=1)if(t[0]===e[o][0]&&t[1]===e[o][1])return!0;return!1}makeShot(t){if(t)return this.shotArrayPlayer.push(t),t;const e=[Math.floor(10*Math.random())+1,Math.floor(10*Math.random())+1];return this.playerShot(e,this.shotArray)?this.makeShot():(this.shotArray.push(e),e)}};(()=>{document.querySelectorAll(".board").forEach((t=>{for(let e=1;e<=100;e+=1){const o=document.createElement("div");let s=`${e} 1`;e>10&&e<=20?s=e-10+" 2":e>20&&e<=30?s=e-20+" 3":e>30&&e<=40?s=e-30+" 4":e>40&&e<=50?s=e-40+" 5":e>50&&e<=60?s=e-50+" 6":e>60&&e<=70?s=e-60+" 7":e>70&&e<=80?s=e-70+" 8":e>80&&e<=90?s=e-80+" 9":e>90&&e<=100&&(s=e-90+" 10"),o.id=s,o.classList.add("coordinate"),t.appendChild(o)}}));const o=new s,i=new s,n=new a,r=new a;o.callShips(),i.callShips(),o.createRandomShipCoordinates(),i.createRandomShipCoordinates(),o.placeShips(),i.placeShips(),((t,e)=>{const o=document.querySelector("#player-board"),s=document.querySelector("#enemy-board");function a(t,e){e.childNodes.forEach((e=>{for(let o=0;o<t.placedShipLocations.length;o+=1)for(let s=0;s<t.placedShipLocations[o].length;s+=1){const a=t.placedShipLocations[o][s].join(" ");e.id===a&&e.classList.add("ship")}}))}a(t,o),a(e,s)})(o,i),document.querySelector("#enemy-board").addEventListener("click",(s=>{const{target:a}=s,h=a.id,l=h.split(" ").map((t=>parseInt(t,10)));if(n.playerShot(l,n.shotArrayPlayer))return;n.makeShot(l),!0===i.attackReceived(l)?(i.hits+=1,console.log(i.hits),(i.allShipsSunk()||19===i.hits)&&t(!0),e(h,!0,!1)):e(h,!1,!1);const c=r.makeShot(),d=c.map((t=>t.toString())).join(" ");!0===o.attackReceived(c)?(o.hits+=1,(o.allShipsSunk()||20===o.hits)&&t(!1),e(d,!0,!0)):e(d,!1,!0)}))})()})();